{
	"info": {
		"_postman_id": "34b4ecfd-9048-4f20-8a32-36d3c37e619e",
		"name": "fo_108_verify_to_return_order_with_imei_and_physical_products",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "23846964"
	},
	"item": [
		{
			"name": "authen",
			"item": [
				{
					"name": "login",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"",
									"payload = {",
									"    \"app_version\": \"1.0.0\",",
									"    \"device_info\": {",
									"        \"id\": \"PxrDAhi-iM19-zGTb-qUDI-XokyYx44lEqa\",",
									"        \"name\": \"IP name\",",
									"        \"os\": \"iphone\"",
									"    },",
									"    \"email\": pm.environment.get(\"L_SER_email\"),",
									"    \"encrypted_password\": pm.environment.get(\"SER-password\"),",
									"    \"phone_number\": \"\",",
									"    \"platform_key\": \"desktop-web\"",
									"}",
									"",
									"console.log(\"payload: \",payload);",
									"pm.environment.set(\"C-payload\",JSON.stringify(payload));",
									"// pm.environment.set(\"C-testcase\",testcase);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// const clRandom = pm.require('@chaule2906/cl-random');",
									"// console.log(\"debug: \" + clRandom.getRandomInt(1,5));",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsData = pm.response.json();",
									"if(pm.response.code == 200){",
									"    pm.test(\"System code is 102000\", function () {",
									"        pm.expect(jsData.code).to.eql(102000);",
									"    });",
									"",
									"    if(jsData.code == 102000){",
									"        let userToken = null;",
									"        try {",
									"            userToken = jsData.data.access_token;",
									"            pm.environment.set(\"C-userToken\",userToken);",
									"            console.info(\"C-userToken\", jsData.data.access_token);",
									"        } catch {",
									"            console.log(\"Can't get userToken\");",
									"        }",
									"",
									"        pm.test(\"Got userToken\", function () {",
									"            pm.expect(userToken != null).to.be.true;",
									"        });",
									"",
									"        let userInfo = jsData.data.user_info;",
									"",
									"        // show log",
									"        console.log(\"userInfo:\",JSON.stringify(userInfo));",
									"        pm.environment.set(\"C-userInfo\",userInfo);",
									"",
									"        postman.setNextRequest(\"verify_token_to_get_business\"); // verify_token_to_get_business",
									"    } else {",
									"        console.log(\"Can't get Token, end test\",jsData);",
									"        postman.setNextRequest(null);",
									"    }",
									"} else {",
									"    console.log(\"Can't login new account, end test\",jsData);",
									"    postman.setNextRequest(null);",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "x-locale",
								"value": "<string>",
								"description": "locale",
								"disabled": true
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{C-payload}}",
							"options": {
								"raw": {
									"headerFamily": "json",
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-user/api/v1/auth/login",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-user",
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Login User"
					},
					"response": []
				}
			]
		},
		{
			"name": "[Check] Data before ordering",
			"item": [
				{
					"name": "Get inventory imei product detail",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"    ",
									"    pm.environment.set(\"L_inventory_imei_product\", jsonData.data);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p1}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p1}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get inventory physical product detail",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"    ",
									"    let jsonData = pm.response.json();",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"    ",
									"    pm.environment.set(\"L_inventory_physical_product\", jsonData.data);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p2}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p2}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "[Action] Order",
			"item": [
				{
					"name": "1. Gen order code",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.environment.set(\"L_order_code_gen\", jsonData.data);",
									"    console.log('L_order_code_gen', pm.environment.get(\"L_order_code_gen\"));",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/get-next-gen-order-code",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"get-next-gen-order-code"
							]
						}
					},
					"response": [
						{
							"name": "0. get-next-gen-order-code",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"value": "*/*"
									},
									{
										"key": "accept-language",
										"value": "vi,en;q=0.9"
									},
									{
										"key": "authorization",
										"value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGTyBVc2VyIiwic3ViIjoiNmU1NzM3N2ItM2ZjMi00NjQ4LWIxYTYtOGUwZjYwODI3OGRlIiwiYXVkIjpbIkZPIFVzZXIiXSwiZXhwIjoxNzI0NDc1MTYwLCJuYmYiOjE3MjE4ODMxNjAsImlhdCI6MTcyMTg4MzE2MCwib3JnX2lkIjoiNDkiLCJidXNpbmVzc19pZCI6IjQ5IiwiZGV2aWNlX2lkIjoiZTljODY2OTAtMzlkNC00MTgxLWIyZmItNmMyZjhlMzFkM2Q5IiwicGxhdGZvcm1fa2V5IjoiZGVza3RvcC13ZWIiLCJ1c2VyX2lkIjoiNmU1NzM3N2ItM2ZjMi00NjQ4LWIxYTYtOGUwZjYwODI3OGRlIiwibG9naW5fbWV0aG9kIjoicGFzc3dvcmQiLCJhcHBfdmVyc2lvbiI6IjEuMS4xIiwic2VjdXJpdHlfcm9sZSI6MCwicmVmcmVzaF90b2tlbl9pZCI6ImE5OGJiNmJlLTNmNGUtNDg0Mi1hM2U4LTExMTY4OWE1MzNmOCJ9.W7r2AupLUAsIFdDLVeYE0ajAtNSdmHqp48ScGpVkBrM"
									},
									{
										"key": "origin",
										"value": "https://pos-stg.finan.one"
									},
									{
										"key": "priority",
										"value": "u=1, i"
									},
									{
										"key": "referer",
										"value": "https://pos-stg.finan.one/"
									},
									{
										"key": "sec-ch-ua",
										"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
									},
									{
										"key": "sec-ch-ua-mobile",
										"value": "?0"
									},
									{
										"key": "sec-ch-ua-platform",
										"value": "\"macOS\""
									},
									{
										"key": "sec-fetch-dest",
										"value": "empty"
									},
									{
										"key": "sec-fetch-mode",
										"value": "cors"
									},
									{
										"key": "sec-fetch-site",
										"value": "same-site"
									},
									{
										"key": "user-agent",
										"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
									},
									{
										"key": "x-locale-code",
										"value": "vi"
									},
									{
										"key": "x-location-timezone",
										"value": "Asia/Ho_Chi_Minh"
									},
									{
										"key": "x-platform-key",
										"value": "desktop-web"
									}
								],
								"url": {
									"raw": "https://stg-api.finan.one/fo-order/api/v1/pos-order/get-next-gen-order-code",
									"protocol": "https",
									"host": [
										"stg-api",
										"finan",
										"one"
									],
									"path": [
										"fo-order",
										"api",
										"v1",
										"pos-order",
										"get-next-gen-order-code"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Thu, 25 Jul 2024 06:44:33 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "128"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "Access-Control-Allow-Origin",
									"value": "*"
								},
								{
									"key": "Access-Control-Expose-Headers",
									"value": "X-Last-Page,X-Next-Page,X-Page,X-Per-Page,X-Total-Items,X-Request-Id,X-Location-Timezone,X-Current-Version,X-Locale-Code,X-Partner-User"
								},
								{
									"key": "X-Request-Id",
									"value": "8509db98e51311ece9c2758b94dc60a3"
								},
								{
									"key": "X-Services",
									"value": "gateway;fo-order"
								},
								{
									"key": "X-Upstream-Latency",
									"value": "15"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=31536000; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": {\n        \"content\": \"Thực thi API thành công\"\n    },\n    \"code\": 102000,\n    \"request_id\": \"8509db98e51311ece9c2758b94dc60a3\",\n    \"data\": \"HD6\"\n}"
						}
					]
				},
				{
					"name": "2. Create order - IMEI/physical product",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"    ",
									"    function getISODateTime() {",
									"        const now = new Date();",
									"        return now.toISOString();",
									"    }",
									"    ",
									"    function randomIntFromInterval(min, max) {",
									"        // min and max included",
									"        return Math.floor(Math.random() * (max - min + 1) + min);",
									"    }",
									"",
									"    let L_order_code_gen = pm.environment.get(\"L_order_code_gen\");",
									"    let L_sales_rep_id = pm.environment.get(\"L_sales_rep_id\");",
									"    let L_branch_id = pm.environment.get(\"L_branch_id\");",
									"    let L_sku_id_p1 = pm.environment.get(\"L_sku_id_p1\");",
									"    let L_sku_id_p2 = pm.environment.get(\"L_sku_id_p2\");",
									"    let imei_quantity_sold = randomIntFromInterval(21, 40);",
									"    let physical_quantity_sold = randomIntFromInterval(21, 40);",
									"    let imei_item_amount = 160000;",
									"    let physical_item_amount = 80000;",
									"    let imei_total_item_amount = imei_quantity_sold * imei_item_amount;",
									"    let physical_total_item_amount = physical_quantity_sold * physical_item_amount;",
									"    let items_amount = imei_total_item_amount + physical_total_item_amount;",
									"    let discount_amount = 30000;",
									"    let imei_discount_amount = Math.round((imei_total_item_amount/items_amount) * discount_amount);",
									"    let physical_discount_amount = Math.round((physical_total_item_amount/items_amount) * discount_amount);",
									"    let payment_request_amount = items_amount - discount_amount;",
									"    pm.environment.set(\"L_imei_quantity_sold\", imei_quantity_sold);",
									"    pm.environment.set(\"L_physical_quantity_sold\", physical_quantity_sold);",
									"",
									"    let payload = {",
									"        \"order_code\": L_order_code_gen,",
									"        \"branch_id\": L_branch_id,",
									"        \"cart_status\": \"completed\",",
									"        \"contact_id\": null,",
									"        \"discount_amount\": discount_amount,",
									"        \"discounts\": [",
									"            {",
									"                \"is_rate\": false,",
									"                \"value\": discount_amount",
									"            }",
									"        ],",
									"        \"is_pre_tax\": false,",
									"        \"items\": [",
									"            {",
									"                \"product_id\": \"272d3ee4-8b73-4950-add4-1b8d8f9ee9df\",",
									"                \"item_amount\": imei_item_amount,",
									"                \"before_tax_amount\": imei_total_item_amount,",
									"                \"discount_amount\": imei_discount_amount,",
									"                \"total_item_amount\": imei_total_item_amount,",
									"                \"total_line_item_amount\": imei_total_item_amount,",
									"                \"after_tax_amount\": imei_total_item_amount,",
									"                \"sku_id\": L_sku_id_p1,",
									"                \"quantity\": imei_quantity_sold,",
									"            },",
									"            {",
									"                \"product_id\": \"204dc8f0-b486-4fba-a7da-45768ac94166\",",
									"                \"item_amount\": physical_item_amount,",
									"                \"before_tax_amount\": physical_total_item_amount,",
									"                \"discount_amount\": physical_discount_amount,",
									"                \"total_item_amount\": physical_total_item_amount,",
									"                \"total_line_item_amount\": physical_total_item_amount,",
									"                \"after_tax_amount\": physical_total_item_amount,",
									"                \"sku_id\": L_sku_id_p2,",
									"                \"quantity\": physical_quantity_sold,",
									"            }",
									"        ],",
									"        \"items_amount\": items_amount,",
									"        \"sub_total_amount\": items_amount,",
									"        \"surcharge_amount\": 0,",
									"        \"surcharges\": [],",
									"        \"tax_amount\": 0,",
									"        \"tax_type\": \"price_excluding_tax\",",
									"        \"total_amount\": payment_request_amount,",
									"        \"shipping_fee_amount\": 0,",
									"        \"value_at\": getISODateTime(),",
									"        \"promotions\": [],",
									"        \"sales_rep_id\": L_sales_rep_id,",
									"        \"note\": \"\",",
									"        \"payment_request\": {",
									"            \"account_id\": 1001527,",
									"            \"account_type\": \"default\",",
									"            \"amount\": payment_request_amount",
									"        }",
									"    }",
									"",
									"    pm.environment.set(\"L_order_body\",JSON.stringify(payload)); // {{L_order_body}}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    pm.environment.set(\"L_order_id\", jsonData.data.id);",
									"    console.info('L_order_id', pm.environment.get(\"L_order_id\"));",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "content-type",
								"value": "application/json"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{L_order_body}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/create",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"create"
							]
						}
					},
					"response": [
						{
							"name": "1.1.Create order IMEI/physical product",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "*/*"
									},
									{
										"key": "accept-language",
										"value": "vi,en;q=0.9"
									},
									{
										"key": "authorization",
										"value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGTyBVc2VyIiwic3ViIjoiNmU1NzM3N2ItM2ZjMi00NjQ4LWIxYTYtOGUwZjYwODI3OGRlIiwiYXVkIjpbIkZPIFVzZXIiXSwiZXhwIjoxNzI0NTU2Nzc3LCJuYmYiOjE3MjE5NjQ3NzcsImlhdCI6MTcyMTk2NDc3Nywib3JnX2lkIjoiNDkiLCJidXNpbmVzc19pZCI6IjQ5IiwiZGV2aWNlX2lkIjoiZTljODY2OTAtMzlkNC00MTgxLWIyZmItNmMyZjhlMzFkM2Q5IiwicGxhdGZvcm1fa2V5IjoiZGVza3RvcC13ZWIiLCJ1c2VyX2lkIjoiNmU1NzM3N2ItM2ZjMi00NjQ4LWIxYTYtOGUwZjYwODI3OGRlIiwibG9naW5fbWV0aG9kIjoicGFzc3dvcmQiLCJhcHBfdmVyc2lvbiI6IjEuMS4xIiwic2VjdXJpdHlfcm9sZSI6MCwicmVmcmVzaF90b2tlbl9pZCI6IjI2M2RhODkzLTdlNzMtNDJjZC04NWE0LWYwN2QxZmZiNTY1OCJ9.34OpILs8IRW3yhoftW_ywqImvOX24z_yX6YhDrw4dIo"
									},
									{
										"key": "content-type",
										"value": "application/json"
									},
									{
										"key": "origin",
										"value": "https://pos-stg.finan.one"
									},
									{
										"key": "priority",
										"value": "u=1, i"
									},
									{
										"key": "referer",
										"value": "https://pos-stg.finan.one/"
									},
									{
										"key": "sec-ch-ua",
										"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
									},
									{
										"key": "sec-ch-ua-mobile",
										"value": "?0"
									},
									{
										"key": "sec-ch-ua-platform",
										"value": "\"macOS\""
									},
									{
										"key": "sec-fetch-dest",
										"value": "empty"
									},
									{
										"key": "sec-fetch-mode",
										"value": "cors"
									},
									{
										"key": "sec-fetch-site",
										"value": "same-site"
									},
									{
										"key": "user-agent",
										"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
									},
									{
										"key": "x-locale-code",
										"value": "vi"
									},
									{
										"key": "x-location-timezone",
										"value": "Asia/Ho_Chi_Minh"
									},
									{
										"key": "x-platform-key",
										"value": "desktop-web"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{C-order-body}}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://stg-api.finan.one/fo-order/api/v1/pos-order/create",
									"protocol": "https",
									"host": [
										"stg-api",
										"finan",
										"one"
									],
									"path": [
										"fo-order",
										"api",
										"v1",
										"pos-order",
										"create"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Mon, 29 Jul 2024 01:25:58 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "1754"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "Access-Control-Allow-Origin",
									"value": "*"
								},
								{
									"key": "Access-Control-Expose-Headers",
									"value": "X-Last-Page,X-Next-Page,X-Page,X-Per-Page,X-Total-Items,X-Request-Id,X-Location-Timezone,X-Current-Version,X-Locale-Code,X-Partner-User"
								},
								{
									"key": "X-Request-Id",
									"value": "762db5c8c58adae7ad04cdb4e45911c9"
								},
								{
									"key": "X-Services",
									"value": "gateway;fo-order"
								},
								{
									"key": "X-Upstream-Latency",
									"value": "202"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=31536000; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": {\n        \"content\": \"Bạn vừa thực hiện tạo thành công %s\"\n    },\n    \"code\": 102001,\n    \"request_id\": \"762db5c8c58adae7ad04cdb4e45911c9\",\n    \"data\": {\n        \"id\": \"c18aa20e-c322-4f0c-8885-d147bba55c04\",\n        \"org_id\": 0,\n        \"business_id\": 49,\n        \"creator_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n        \"updater_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"created_at\": \"2024-07-29T08:25:58.05752+07:00\",\n        \"updated_at\": \"2024-07-29T08:25:58.05752+07:00\",\n        \"deleted_at\": null,\n        \"so_type\": \"pos_order\",\n        \"branch_id\": \"e5609d21-65c7-47ce-a8e9-bb8177cac744\",\n        \"order_code\": \"HD12\",\n        \"system_code\": \"SO5TS72L\",\n        \"reference_order_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"value_at\": \"2024-07-29T01:07:52.394Z\",\n        \"due_at\": \"2024-07-29T01:25:58.057520691Z\",\n        \"sent_at\": null,\n        \"sub_total_amount\": 320000,\n        \"items_amount\": 320000,\n        \"discount_amount\": 10000,\n        \"promotion_amount\": 0,\n        \"surcharge_amount\": 0,\n        \"shipping_fee_amount\": 0,\n        \"return_fee_amount\": 0,\n        \"total_amount\": 310000,\n        \"tax_amount\": 0,\n        \"after_tax_amount\": 0,\n        \"payment_due_amount\": 310000,\n        \"return_amount\": 0,\n        \"paid_amount\": 0,\n        \"currency\": \"\",\n        \"cart_status\": \"completed\",\n        \"cart_sub_status\": \"completed\",\n        \"ops_status\": \"\",\n        \"payment_status\": \"un_paid\",\n        \"tax_type\": \"price_excluding_tax\",\n        \"is_pre_tax\": false,\n        \"contact_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"contact_info\": null,\n        \"sales_rep_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n        \"sales_rep_info\": {\n            \"id\": \"e2dedbd9-5c8b-4646-b5f6-b38e993735bb\",\n            \"business_id\": 49,\n            \"user_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n            \"full_name\": \"Qaung Minh\",\n            \"user_name\": \"\",\n            \"staff_code\": \"\",\n            \"phone_number\": \"\",\n            \"email\": \"quangminh@gmail.com\",\n            \"avatar\": \"\",\n            \"gender\": \"\",\n            \"contract_type\": \"\"\n        },\n        \"custom_field\": null,\n        \"email\": \"\",\n        \"attachment_url\": null,\n        \"account_id\": 0,\n        \"payment_config\": null,\n        \"discounts\": [\n            {\n                \"note\": \"\",\n                \"is_rate\": false,\n                \"value\": 10000\n            }\n        ],\n        \"surcharges\": [],\n        \"promotions\": [],\n        \"shipping\": {},\n        \"note\": \"\"\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "[Check] Data after ordering",
			"item": [
				{
					"name": "Get inventory imei product detail - after sale",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let L_inventory_imei_product = pm.environment.get(\"L_inventory_imei_product\")",
									"    let L_imei_quantity_sold = pm.environment.get(\"L_imei_quantity_sold\");",
									"    let product_amount_after_order = L_inventory_imei_product.total_quantity - L_imei_quantity_sold;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Deduct the correct quantity sold\", function () {",
									"        pm.expect(jsonData.data.total_quantity).to.equal(product_amount_after_order);",
									"    });",
									"",
									"    pm.environment.set(\"L_inventory_imei_product\", jsonData.data);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p1}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p1}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get inventory physical product detail - after sale",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let L_inventory_physical_product = pm.environment.get(\"L_inventory_physical_product\")",
									"    let L_physical_quantity_sold = pm.environment.get(\"L_physical_quantity_sold\");",
									"    let product_amount_after_order = L_inventory_physical_product.total_quantity - L_physical_quantity_sold;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Deduct the correct quantity sold\", function () {",
									"        pm.expect(jsonData.data.total_quantity).to.equal(product_amount_after_order);",
									"    });",
									"",
									"    pm.environment.set(\"L_inventory_physical_product\", jsonData.data);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p2}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p2}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "[Action] Calculate return",
			"item": [
				{
					"name": "1. Get order detail",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"    ",
									"    function randomIntFromInterval(min, max) {",
									"        // min and max included",
									"        return Math.floor(Math.random() * (max - min + 1) + min);",
									"    }",
									"",
									"    let jsonData = pm.response.json();",
									"    let imei_quantity_return = randomIntFromInterval(10, 20);",
									"    let physical_quantity_return = randomIntFromInterval(10, 20);",
									"    pm.environment.set(\"L_order_detail\", jsonData.data);",
									"    pm.environment.set(\"L_imei_quantity_return\", imei_quantity_return);",
									"    pm.environment.set(\"L_physical_quantity_return\", physical_quantity_return);",
									"",
									"    let item_list = [];",
									"    let discountTotal = 0;",
									"    for (const item of jsonData.data.items) {",
									"        let product = {};",
									"        if (item.sku_info.product_type === \"imei_product\") {",
									"            product.quantity = imei_quantity_return;",
									"        } else if (item.sku_info.product_type === \"physical\") {",
									"            product.quantity = physical_quantity_return;",
									"        }",
									"        product.discount_amount = (item.discount_amount / item.quantity) * product.quantity;",
									"        discountTotal += product.discount_amount;",
									"        product.id = item.id;",
									"        product.product_id = item.product_id;",
									"        product.sku_id = item.sku_id;",
									"        product.item_amount = item.item_amount;",
									"        product.total_item_amount = item.total_item_amount;",
									"        product.total_line_item_amount = item.total_line_item_amount;",
									"        product.item_tax_amount = 0;",
									"        product.before_tax_amount = item.before_tax_amount;",
									"        product.after_tax_amount = item.after_tax_amount;",
									"        product.can_pick_quantity = 0;",
									"        product.allow_negative_inventory = false;",
									"        product.account_id = 0;",
									"        item_list.push(product);",
									"    }",
									"",
									"    pm.environment.set(\"L_discount_total\", Math.round(discountTotal));",
									"    pm.environment.set(\"L_payment_due_amount\", jsonData.data.payment_due_amount);",
									"    pm.environment.set(\"L_order_item_detail\", item_list);",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "User-Agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "Referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/get-one/{{L_order_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"get-one",
								"{{L_order_id}}"
							]
						}
					},
					"response": [
						{
							"name": "1. Get order detail",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "sec-ch-ua",
										"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
									},
									{
										"key": "x-location-timezone",
										"value": "Asia/Ho_Chi_Minh"
									},
									{
										"key": "x-platform-key",
										"value": "desktop-web"
									},
									{
										"key": "x-locale-code",
										"value": "vi"
									},
									{
										"key": "sec-ch-ua-mobile",
										"value": "?0"
									},
									{
										"key": "authorization",
										"value": "Bearer {{C-userToken}}"
									},
									{
										"key": "User-Agent",
										"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
									},
									{
										"key": "Referer",
										"value": "https://pos-stg.finan.one/"
									},
									{
										"key": "sec-ch-ua-platform",
										"value": "\"macOS\""
									}
								],
								"url": {
									"raw": "https://stg-api.finan.one/fo-order/api/v1/pos-order/get-one/{{L_order_id}}",
									"protocol": "https",
									"host": [
										"stg-api",
										"finan",
										"one"
									],
									"path": [
										"fo-order",
										"api",
										"v1",
										"pos-order",
										"get-one",
										"{{L_order_id}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Mon, 29 Jul 2024 01:30:11 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Request-Id",
									"value": "f488625188096b7f30d7c3df50be884e"
								},
								{
									"key": "X-Services",
									"value": "gateway;fo-order"
								},
								{
									"key": "X-Upstream-Latency",
									"value": "30"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=31536000; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": {\n        \"content\": \"Thực thi API thành công\"\n    },\n    \"code\": 102000,\n    \"request_id\": \"f488625188096b7f30d7c3df50be884e\",\n    \"data\": {\n        \"id\": \"c18aa20e-c322-4f0c-8885-d147bba55c04\",\n        \"org_id\": 0,\n        \"business_id\": 49,\n        \"creator_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n        \"updater_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"created_at\": \"2024-07-29T01:25:58.05752Z\",\n        \"updated_at\": \"2024-07-29T01:25:58.205098Z\",\n        \"deleted_at\": null,\n        \"so_type\": \"pos_order\",\n        \"branch_id\": \"e5609d21-65c7-47ce-a8e9-bb8177cac744\",\n        \"order_code\": \"HD12\",\n        \"system_code\": \"SO5TS72L\",\n        \"reference_order_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"value_at\": \"2024-07-29T01:07:52.394Z\",\n        \"due_at\": \"2024-07-29T01:25:58.05752Z\",\n        \"sent_at\": null,\n        \"sub_total_amount\": 320000,\n        \"items_amount\": 320000,\n        \"discount_amount\": 10000,\n        \"promotion_amount\": 0,\n        \"surcharge_amount\": 0,\n        \"shipping_fee_amount\": 0,\n        \"return_fee_amount\": 0,\n        \"total_amount\": 310000,\n        \"tax_amount\": 0,\n        \"after_tax_amount\": 0,\n        \"payment_due_amount\": 0,\n        \"return_amount\": 0,\n        \"paid_amount\": 310000,\n        \"currency\": \"   \",\n        \"cart_status\": \"completed\",\n        \"cart_sub_status\": \"completed\",\n        \"ops_status\": \"\",\n        \"payment_status\": \"fully_paid\",\n        \"tax_type\": \"price_excluding_tax\",\n        \"is_pre_tax\": false,\n        \"contact_id\": \"00000000-0000-0000-0000-000000000000\",\n        \"contact_info\": null,\n        \"sales_rep_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n        \"sales_rep_info\": {\n            \"id\": \"e2dedbd9-5c8b-4646-b5f6-b38e993735bb\",\n            \"email\": \"quangminh@gmail.com\",\n            \"avatar\": \"\",\n            \"gender\": \"\",\n            \"user_id\": \"6e57377b-3fc2-4648-b1a6-8e0f608278de\",\n            \"full_name\": \"Qaung Minh\",\n            \"user_name\": \"\",\n            \"staff_code\": \"\",\n            \"business_id\": 49,\n            \"phone_number\": \"\",\n            \"contract_type\": \"\"\n        },\n        \"custom_field\": null,\n        \"email\": \"\",\n        \"attachment_url\": null,\n        \"account_id\": 0,\n        \"payment_config\": null,\n        \"discounts\": [\n            {\n                \"note\": \"\",\n                \"value\": 10000,\n                \"is_rate\": false\n            }\n        ],\n        \"surcharges\": [],\n        \"promotions\": [],\n        \"shipping\": {},\n        \"note\": \"\",\n        \"payment_request\": null,\n        \"final_status\": \"completed\",\n        \"items\": [\n            {\n                \"id\": \"bb87602f-6cb3-4931-9a41-e62ec77bfd97\",\n                \"org_id\": 0,\n                \"business_id\": 49,\n                \"created_at\": \"2024-07-29T08:25:58.075722+07:00\",\n                \"updated_at\": \"2024-07-29T08:25:58.075722+07:00\",\n                \"deleted_at\": null,\n                \"order_id\": \"c18aa20e-c322-4f0c-8885-d147bba55c04\",\n                \"product_id\": \"272d3ee4-8b73-4950-add4-1b8d8f9ee9df\",\n                \"sku_id\": \"24c74fbe-487e-44fe-86c2-647b11df993f\",\n                \"uom_id\": \"00000000-0000-0000-0000-000000000000\",\n                \"item_amount\": 160000,\n                \"quantity\": 1,\n                \"total_item_amount\": 160000,\n                \"total_line_item_amount\": 160000,\n                \"discount_amount\": 5000,\n                \"before_tax_amount\": 160000,\n                \"after_tax_amount\": 160000,\n                \"tax_amount\": 0,\n                \"tax_rate\": 0,\n                \"currency\": \"   \",\n                \"note\": \"\",\n                \"serial_number\": \"\",\n                \"addon_info\": null,\n                \"sku_info\": {\n                    \"id\": \"24c74fbe-487e-44fe-86c2-647b11df993f\",\n                    \"product_id\": \"272d3ee4-8b73-4950-add4-1b8d8f9ee9df\",\n                    \"product_name\": \"SPLG001 Sản phẩm IMEI \",\n                    \"product_type\": \"imei_product\",\n                    \"product_images\": null,\n                    \"sku_name\": \"\",\n                    \"sku_code\": \"SP00056\",\n                    \"bar_code\": \"\",\n                    \"images\": null,\n                    \"uom\": \"\",\n                    \"sale_price\": 200000,\n                    \"cost_price\": 89000,\n                    \"selling_price\": 160000,\n                    \"sold_quantity\": 0,\n                    \"shelf_life\": 0,\n                    \"shelf_life_unit\": \"\",\n                    \"allow_negative_inventory\": true,\n                    \"track_inventory\": true,\n                    \"priority\": 0,\n                    \"is_hidden\": false,\n                    \"is_in_business\": true,\n                    \"inventory\": {\n                        \"cost_price\": 89000,\n                        \"total_quantity\": 119991,\n                        \"total_delivery_quantity\": 0,\n                        \"total_can_pick_quantity\": 119991,\n                        \"batches\": [\n                            {\n                                \"id\": \"f49b116c-388f-4cfd-803e-62e9aac6c064\",\n                                \"po_item_id\": \"b79677c2-c516-4657-8d53-25a8f5087476\",\n                                \"product_id\": \"272d3ee4-8b73-4950-add4-1b8d8f9ee9df\",\n                                \"sku_id\": \"24c74fbe-487e-44fe-86c2-647b11df993f\",\n                                \"name\": \"Khởi tạo kho\",\n                                \"batch_code\": \"\",\n                                \"total_quantity\": 119991,\n                                \"delivery_quantity\": 0,\n                                \"blocked_quantity\": 0,\n                                \"can_pick_quantity\": 119991,\n                                \"production_date\": \"0001-01-01T07:06:30+07:06\",\n                                \"expiration_date\": \"0001-01-01T07:06:30+07:06\",\n                                \"import_date\": \"2024-07-25T13:35:07.785282+07:00\"\n                            }\n                        ]\n                    }\n                },\n                \"uom_info\": null,\n                \"income_account_id\": 0,\n                \"expense_account_id\": 0,\n                \"tax_info\": null,\n                \"batch_info\": null\n            },\n            {\n                \"id\": \"a50bb078-a775-42e8-b862-b15a7762848f\",\n                \"org_id\": 0,\n                \"business_id\": 49,\n                \"created_at\": \"2024-07-29T08:25:58.080387+07:00\",\n                \"updated_at\": \"2024-07-29T08:25:58.080387+07:00\",\n                \"deleted_at\": null,\n                \"order_id\": \"c18aa20e-c322-4f0c-8885-d147bba55c04\",\n                \"product_id\": \"204dc8f0-b486-4fba-a7da-45768ac94166\",\n                \"sku_id\": \"99336b48-ed19-4ea7-b20a-0df91a0f50dd\",\n                \"uom_id\": \"00000000-0000-0000-0000-000000000000\",\n                \"item_amount\": 80000,\n                \"quantity\": 2,\n                \"total_item_amount\": 160000,\n                \"total_line_item_amount\": 160000,\n                \"discount_amount\": 5000,\n                \"before_tax_amount\": 160000,\n                \"after_tax_amount\": 160000,\n                \"tax_amount\": 0,\n                \"tax_rate\": 0,\n                \"currency\": \"   \",\n                \"note\": \"\",\n                \"serial_number\": \"\",\n                \"addon_info\": null,\n                \"sku_info\": {\n                    \"id\": \"99336b48-ed19-4ea7-b20a-0df91a0f50dd\",\n                    \"product_id\": \"204dc8f0-b486-4fba-a7da-45768ac94166\",\n                    \"product_name\": \"SPLG001 Sản phẩm Thường\",\n                    \"product_type\": \"physical\",\n                    \"product_images\": null,\n                    \"sku_name\": \"\",\n                    \"sku_code\": \"SP00052\",\n                    \"bar_code\": \"\",\n                    \"images\": null,\n                    \"uom\": \"Cái\",\n                    \"sale_price\": 0,\n                    \"cost_price\": 73000,\n                    \"selling_price\": 0,\n                    \"sold_quantity\": 0,\n                    \"shelf_life\": 0,\n                    \"shelf_life_unit\": \"day\",\n                    \"allow_negative_inventory\": false,\n                    \"track_inventory\": true,\n                    \"priority\": 0,\n                    \"is_hidden\": false,\n                    \"is_in_business\": true,\n                    \"inventory\": {\n                        \"cost_price\": 73000,\n                        \"total_quantity\": 299989,\n                        \"total_delivery_quantity\": 0,\n                        \"total_can_pick_quantity\": 299989,\n                        \"batches\": [\n                            {\n                                \"id\": \"f266662e-aa68-4de5-9d98-562b68352809\",\n                                \"po_item_id\": \"168b37b0-efc8-48f0-af36-23aa716a7363\",\n                                \"product_id\": \"204dc8f0-b486-4fba-a7da-45768ac94166\",\n                                \"sku_id\": \"99336b48-ed19-4ea7-b20a-0df91a0f50dd\",\n                                \"name\": \"Khởi tạo kho\",\n                                \"batch_code\": \"\",\n                                \"total_quantity\": 299989,\n                                \"delivery_quantity\": 0,\n                                \"blocked_quantity\": 0,\n                                \"can_pick_quantity\": 299989,\n                                \"production_date\": \"0001-01-01T07:06:30+07:06\",\n                                \"expiration_date\": \"0001-01-01T07:06:30+07:06\",\n                                \"import_date\": \"2024-07-25T11:53:55.272715+07:00\"\n                            }\n                        ]\n                    }\n                },\n                \"uom_info\": null,\n                \"income_account_id\": 0,\n                \"expense_account_id\": 0,\n                \"tax_info\": null,\n                \"batch_info\": null\n            }\n        ],\n        \"business_info\": {\n            \"id\": 49,\n            \"name\": \"Quang Minh Corp\",\n            \"detail_address\": \"\",\n            \"area_level1_name\": \"\",\n            \"area_level2_name\": \"Huyện Đông Anh\",\n            \"area_level3_name\": \"Thành phố Hà Nội\",\n            \"phone_number\": \"\",\n            \"avatar\": \"\"\n        },\n        \"branch_info\": {\n            \"id\": \"e5609d21-65c7-47ce-a8e9-bb8177cac744\",\n            \"business_id\": 49,\n            \"branch_name\": \"Quang Minh Corp\",\n            \"branch_code\": \"BRJVT1WI\",\n            \"phone_number\": \"\",\n            \"email\": \"quangminh@gmail.com\",\n            \"detail_address\": \"\",\n            \"area_level1_name\": \"\",\n            \"area_level2_name\": \"Huyện Đông Anh\",\n            \"area_level3_name\": \"Thành phố Hà Nội\",\n            \"is_default\": false\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "2. Return calculation - no fee",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let discountTotal = 0;",
									"    for (const item of jsonData.data.items) {",
									"        discountTotal += item.discount_amount;",
									"    }",
									"    let return_value = jsonData.data.sub_total_amount - discountTotal;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Check the correct discount value\", function () {",
									"        pm.expect(discountTotal).to.equal(pm.environment.get(\"L_discount_total\"));",
									"    });",
									"",
									"    pm.test(\"Check correct return value\", function () {",
									"        pm.expect(return_value).to.equal(jsonData.data.total_amount);",
									"    });",
									"",
									"    let L_return_order_body = jsonData.data;",
									"    L_return_order_body.payment_request = {",
									"        \"account_id\": 1001527,",
									"        \"account_type\": \"default\",",
									"        \"amount\": return_value",
									"    }",
									"",
									"    pm.environment.set(\"L_return_order_body\",JSON.stringify(L_return_order_body)); // {{L_return_order_body}}",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"",
									"    let L_order_detail = pm.environment.get(\"L_order_detail\");",
									"    let L_order_item_detail = pm.environment.get(\"L_order_item_detail\");",
									"    let L_discount_total = pm.environment.get(\"L_discount_total\");",
									"    let L_branch_id = pm.environment.get(\"L_branch_id\");",
									"",
									"    let payload = {",
									"        \"id\": L_order_detail.id,",
									"        \"tax_type\": \"price_excluding_tax\",",
									"        \"items\": L_order_item_detail,",
									"        \"is_pre_tax\": false,",
									"        \"branch_id\": L_branch_id,",
									"        \"return_fees\": [",
									"            {",
									"                \"is_rate\": true,",
									"                \"value\": 0",
									"            }",
									"        ],",
									"        \"surcharges\": [],",
									"        \"discounts\": [",
									"            {",
									"                \"is_rate\": false,",
									"                \"value\": L_discount_total",
									"            }",
									"        ]",
									"    }",
									"",
									"    pm.environment.set(\"L_calculate_return_body\", JSON.stringify(payload)); // {{L_calculate_return_body}}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "content-type",
								"value": "application/json"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{L_calculate_return_body}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/calculate-return",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"calculate-return"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Return calculation - add fixed fee",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let item_list = [];",
									"    let discountTotal = 0;",
									"    let L_return_fixed_fee = pm.environment.get(\"L_return_fixed_fee\");",
									"    for (const item of jsonData.data.items) {",
									"        discountTotal += item.discount_amount;",
									"    }",
									"    let return_value =",
									"        jsonData.data.sub_total_amount - jsonData.data.discount_amount - jsonData.data.return_fee_amount;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Check the correct discount value\", function () {",
									"        pm.expect(discountTotal).to.equal(jsonData.data.discount_amount);",
									"        pm.expect(discountTotal).to.equal(pm.environment.get(\"L_discount_total\"));",
									"    });",
									"",
									"    pm.test(\"Check the correct return fee value\", function () {",
									"        pm.expect(L_return_fixed_fee).to.equal(jsonData.data.return_fee_amount);",
									"    });",
									"",
									"    pm.test(\"Check correct return value\", function () {",
									"        pm.expect(return_value).to.equal(jsonData.data.total_amount);",
									"    });",
									"",
									"    let L_return_order_body = jsonData.data;",
									"    L_return_order_body.payment_request = {",
									"        \"account_id\": 1001527,",
									"        \"account_type\": \"default\",",
									"        \"amount\": return_value",
									"    }",
									"",
									"    pm.environment.set(\"L_return_order_body\", JSON.stringify(L_return_order_body)); // {{L_return_order_body}}",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"",
									"    let L_order_detail = pm.environment.get(\"L_order_detail\");",
									"    let L_order_item_detail = pm.environment.get(\"L_order_item_detail\");",
									"    let L_discount_total = pm.environment.get(\"L_discount_total\");",
									"    let L_branch_id = pm.environment.get(\"L_branch_id\");",
									"    let L_return_fixed_fee = pm.environment.get(\"L_return_fixed_fee\");",
									"",
									"    let payload = {",
									"        \"id\": L_order_detail.id,",
									"        \"tax_type\": \"price_excluding_tax\",",
									"        \"items\": L_order_item_detail,",
									"        \"is_pre_tax\": false,",
									"        \"branch_id\": L_branch_id,",
									"        \"return_fees\": [",
									"            {",
									"                is_rate: false,",
									"                \"value\": L_return_fixed_fee",
									"            }",
									"        ],",
									"        \"surcharges\": [],",
									"        \"discounts\": [",
									"            {",
									"                \"is_rate\": false,",
									"                \"value\": L_discount_total",
									"            }",
									"        ]",
									"    }",
									"",
									"    pm.environment.set(\"L_calculate_return_body\", JSON.stringify(payload)); // {{L_calculate_return_body}}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "content-type",
								"value": "application/json"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{L_calculate_return_body}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/calculate-return",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"calculate-return"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Return calculation - add percentage fee",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let item_list = [];",
									"    let discountTotal = 0;",
									"    for (const item of jsonData.data.items) {",
									"        discountTotal += item.discount_amount;",
									"    }",
									"    console.info('discountTotal: ', discountTotal);",
									"",
									"    let L_return_fee_amount = Math.round(",
									"        (jsonData.data.items_amount - jsonData.data.discount_amount) * jsonData.data.return_fees[0].value / 100",
									"    );",
									"    let L_return_amount =",
									"        jsonData.data.items_amount - jsonData.data.discount_amount - L_return_fee_amount;",
									"    ",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Check the correct discount value\", function () {",
									"        pm.expect(discountTotal).to.equal(jsonData.data.discount_amount);",
									"        pm.expect(discountTotal).to.equal(pm.environment.get(\"L_discount_total\"));",
									"    });",
									"",
									"    pm.test(\"Check the correct return fee value\", function () {",
									"        pm.expect(L_return_fee_amount).to.equal(jsonData.data.return_fee_amount);",
									"    });",
									"",
									"    pm.test(\"Check correct return value\", function () {",
									"        pm.expect(L_return_amount).to.equal(jsonData.data.total_amount);",
									"    });",
									"",
									"    let L_return_order_body = jsonData.data;",
									"    L_return_order_body.payment_request = {",
									"        \"account_id\": 1001527,",
									"        \"account_type\": \"default\",",
									"        \"amount\": L_return_amount",
									"    }",
									"",
									"    pm.environment.set(\"L_return_order_body\", JSON.stringify(L_return_order_body)); // {{L_return_order_body}}",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"",
									"    let L_order_detail = pm.environment.get(\"L_order_detail\");",
									"    let L_order_item_detail = pm.environment.get(\"L_order_item_detail\");",
									"    let L_discount_total = pm.environment.get(\"L_discount_total\");",
									"    let L_branch_id = pm.environment.get(\"L_branch_id\");",
									"    let L_return_percentage_fee = pm.environment.get(\"L_return_percentage_fee\");",
									"",
									"    let payload = {",
									"        \"id\": L_order_detail.id,",
									"        \"tax_type\": \"price_excluding_tax\",",
									"        \"items\": L_order_item_detail,",
									"        \"is_pre_tax\": false,",
									"        \"branch_id\": L_branch_id,",
									"        \"return_fees\": [",
									"            {",
									"                is_rate: true,",
									"                \"value\": L_return_percentage_fee",
									"            }",
									"        ],",
									"        \"surcharges\": [],",
									"        \"discounts\": [",
									"            {",
									"                \"is_rate\": false,",
									"                \"value\": L_discount_total",
									"            }",
									"        ]",
									"    }",
									"",
									"    pm.environment.set(\"L_calculate_return_body\", JSON.stringify(payload)); // {{L_calculate_return_body}}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "content-type",
								"value": "application/json"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{L_calculate_return_body}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/calculate-return",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"calculate-return"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "[Action] Return order",
			"item": [
				{
					"name": "1. Return order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "OPTIONS",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,content-type,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "PATCH"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/return/{{L_order_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"return",
								"{{L_order_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Return order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}"
							},
							{
								"key": "content-type",
								"value": "application/json"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-ch-ua",
								"value": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\""
							},
							{
								"key": "sec-ch-ua-mobile",
								"value": "?0"
							},
							{
								"key": "sec-ch-ua-platform",
								"value": "\"macOS\""
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "x-locale-code",
								"value": "vi"
							},
							{
								"key": "x-location-timezone",
								"value": "Asia/Ho_Chi_Minh"
							},
							{
								"key": "x-platform-key",
								"value": "desktop-web"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{L_return_order_body}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/pos-order/return/{{L_order_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"pos-order",
								"return",
								"{{L_order_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "[Check] Data after returning the order",
			"item": [
				{
					"name": "Get inventory imei product detail - after return",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let L_inventory_imei_product = pm.environment.get(\"L_inventory_imei_product\")",
									"    let L_imei_quantity_return = pm.environment.get(\"L_imei_quantity_return\");",
									"    let product_amount_after_return_real = L_inventory_imei_product.total_quantity + L_imei_quantity_return;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"    ",
									"    pm.test(\"Add the correct number of items returned\", function () {",
									"        pm.expect(jsonData.data.total_quantity).to.equal(product_amount_after_return_real);",
									"    });"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p1}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p1}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Get inventory imei product detail - after return",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"value": "*/*"
									},
									{
										"key": "accept-language",
										"value": "vi,en;q=0.9"
									},
									{
										"key": "access-control-request-headers",
										"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
									},
									{
										"key": "access-control-request-method",
										"value": "GET"
									},
									{
										"key": "origin",
										"value": "https://pos-stg.finan.one"
									},
									{
										"key": "priority",
										"value": "u=1, i"
									},
									{
										"key": "referer",
										"value": "https://pos-stg.finan.one/"
									},
									{
										"key": "sec-fetch-dest",
										"value": "empty"
									},
									{
										"key": "sec-fetch-mode",
										"value": "cors"
									},
									{
										"key": "sec-fetch-site",
										"value": "same-site"
									},
									{
										"key": "user-agent",
										"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
									},
									{
										"key": "authorization",
										"value": "Bearer {{C-userToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p1}}?branch_id={{L_branch_id}}",
									"host": [
										"{{finone_url}}"
									],
									"path": [
										"fo-order",
										"api",
										"v1",
										"inventory",
										"get-one",
										"{{L_sku_id_p1}}"
									],
									"query": [
										{
											"key": "branch_id",
											"value": "{{L_branch_id}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Tue, 30 Jul 2024 03:26:45 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "780"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "Access-Control-Allow-Origin",
									"value": "*"
								},
								{
									"key": "Access-Control-Expose-Headers",
									"value": "X-Last-Page,X-Next-Page,X-Page,X-Per-Page,X-Total-Items,X-Request-Id,X-Location-Timezone,X-Current-Version,X-Locale-Code,X-Partner-User"
								},
								{
									"key": "X-Request-Id",
									"value": "4bbb6d176cc2103d925da8642a9b64b8"
								},
								{
									"key": "X-Services",
									"value": "gateway;fo-order"
								},
								{
									"key": "X-Upstream-Latency",
									"value": "26"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=31536000; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": {\n        \"content\": \"Thực thi API thành công\"\n    },\n    \"code\": 102000,\n    \"request_id\": \"4bbb6d176cc2103d925da8642a9b64b8\",\n    \"data\": {\n        \"product_id\": \"272d3ee4-8b73-4950-add4-1b8d8f9ee9df\",\n        \"product_name\": \"SPLG001 Sản phẩm IMEI \",\n        \"product_type\": \"imei_product\",\n        \"product_images\": null,\n        \"sku_id\": \"24c74fbe-487e-44fe-86c2-647b11df993f\",\n        \"sku_code\": \"SP00056\",\n        \"sku_name\": \"\",\n        \"bar_code\": \"\",\n        \"images\": null,\n        \"sale_price\": 200000,\n        \"cost_price\": 89000,\n        \"selling_price\": 160000,\n        \"sold_quantity\": 0,\n        \"shelf_life\": 0,\n        \"shelf_life_unit\": \"\",\n        \"uom\": \"\",\n        \"track_inventory\": true,\n        \"allow_negative_inventory\": true,\n        \"priority\": 0,\n        \"is_hidden\": false,\n        \"is_in_business\": true,\n        \"uom_receive\": \"\",\n        \"uom_conversion_rate\": 0,\n        \"total_quantity\": 119807,\n        \"total_blocked_quantity\": 0,\n        \"total_delivery_quantity\": 0,\n        \"total_warning_value\": 0,\n        \"track_batch\": false\n    }\n}"
						}
					]
				},
				{
					"name": "Get inventory physical product detail - after return",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"    let jsonData = pm.response.json();",
									"    let L_inventory_physical_product = pm.environment.get(\"L_inventory_physical_product\")",
									"    let L_physical_quantity_return = pm.environment.get(\"L_physical_quantity_return\");",
									"    let product_amount_after_return = L_inventory_physical_product.total_quantity + L_physical_quantity_return;",
									"",
									"    pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"",
									"    pm.test(\"Add the correct number of items returned\", function () {",
									"        pm.expect(jsonData.data.total_quantity).to.equal(product_amount_after_return);",
									"    });"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "*/*"
							},
							{
								"key": "accept-language",
								"value": "vi,en;q=0.9"
							},
							{
								"key": "access-control-request-headers",
								"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
							},
							{
								"key": "access-control-request-method",
								"value": "GET"
							},
							{
								"key": "origin",
								"value": "https://pos-stg.finan.one"
							},
							{
								"key": "priority",
								"value": "u=1, i"
							},
							{
								"key": "referer",
								"value": "https://pos-stg.finan.one/"
							},
							{
								"key": "sec-fetch-dest",
								"value": "empty"
							},
							{
								"key": "sec-fetch-mode",
								"value": "cors"
							},
							{
								"key": "sec-fetch-site",
								"value": "same-site"
							},
							{
								"key": "user-agent",
								"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
							},
							{
								"key": "authorization",
								"value": "Bearer {{C-userToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p2}}?branch_id={{L_branch_id}}",
							"host": [
								"{{finone_url}}"
							],
							"path": [
								"fo-order",
								"api",
								"v1",
								"inventory",
								"get-one",
								"{{L_sku_id_p2}}"
							],
							"query": [
								{
									"key": "branch_id",
									"value": "{{L_branch_id}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Get inventory physical product detail - after return",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"value": "*/*"
									},
									{
										"key": "accept-language",
										"value": "vi,en;q=0.9"
									},
									{
										"key": "access-control-request-headers",
										"value": "authorization,x-locale-code,x-location-timezone,x-platform-key"
									},
									{
										"key": "access-control-request-method",
										"value": "GET"
									},
									{
										"key": "origin",
										"value": "https://pos-stg.finan.one"
									},
									{
										"key": "priority",
										"value": "u=1, i"
									},
									{
										"key": "referer",
										"value": "https://pos-stg.finan.one/"
									},
									{
										"key": "sec-fetch-dest",
										"value": "empty"
									},
									{
										"key": "sec-fetch-mode",
										"value": "cors"
									},
									{
										"key": "sec-fetch-site",
										"value": "same-site"
									},
									{
										"key": "user-agent",
										"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36"
									},
									{
										"key": "authorization",
										"value": "Bearer {{C-userToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{finone_url}}/fo-order/api/v1/inventory/get-one/{{L_sku_id_p2}}?branch_id={{L_branch_id}}",
									"host": [
										"{{finone_url}}"
									],
									"path": [
										"fo-order",
										"api",
										"v1",
										"inventory",
										"get-one",
										"{{L_sku_id_p2}}"
									],
									"query": [
										{
											"key": "branch_id",
											"value": "{{L_branch_id}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Tue, 30 Jul 2024 03:27:58 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "778"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "Access-Control-Allow-Origin",
									"value": "*"
								},
								{
									"key": "Access-Control-Expose-Headers",
									"value": "X-Last-Page,X-Next-Page,X-Page,X-Per-Page,X-Total-Items,X-Request-Id,X-Location-Timezone,X-Current-Version,X-Locale-Code,X-Partner-User"
								},
								{
									"key": "X-Request-Id",
									"value": "87ba4aad3c12370477f0ff1ca89296ae"
								},
								{
									"key": "X-Services",
									"value": "gateway;fo-order"
								},
								{
									"key": "X-Upstream-Latency",
									"value": "20"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=31536000; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": {\n        \"content\": \"Thực thi API thành công\"\n    },\n    \"code\": 102000,\n    \"request_id\": \"87ba4aad3c12370477f0ff1ca89296ae\",\n    \"data\": {\n        \"product_id\": \"204dc8f0-b486-4fba-a7da-45768ac94166\",\n        \"product_name\": \"SPLG001 Sản phẩm Thường\",\n        \"product_type\": \"physical\",\n        \"product_images\": null,\n        \"sku_id\": \"99336b48-ed19-4ea7-b20a-0df91a0f50dd\",\n        \"sku_code\": \"SP00052\",\n        \"sku_name\": \"\",\n        \"bar_code\": \"\",\n        \"images\": null,\n        \"sale_price\": 0,\n        \"cost_price\": 73000,\n        \"selling_price\": 0,\n        \"sold_quantity\": 0,\n        \"shelf_life\": 0,\n        \"shelf_life_unit\": \"day\",\n        \"uom\": \"Cái\",\n        \"track_inventory\": true,\n        \"allow_negative_inventory\": false,\n        \"priority\": 0,\n        \"is_hidden\": false,\n        \"is_in_business\": true,\n        \"uom_receive\": \"\",\n        \"uom_conversion_rate\": 0,\n        \"total_quantity\": 299735,\n        \"total_blocked_quantity\": 0,\n        \"total_delivery_quantity\": 0,\n        \"total_warning_value\": 0,\n        \"track_batch\": false\n    }\n}"
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"",
					"    // \"9500d800-aa78-4fce-92b9-7b55809c79f5\"/\"Chi nhánh Cư Jút Đắk Nông\"",
					"    // \"f5864961-d06f-4273-beeb-5282204e61fc\"/\"Chi Nhánh Bát Xát Lào Cai\"",
					"    // \"cb7674e1-0230-4e7e-a55f-b8cdb7e82024\"/\"Chi Nhánh Yên Thế Bắc Giang\"",
					"    // \"73a25fe0-0ae0-46c8-8725-6e29a33fe3c1\"/\"Chi nhánh Mường Nhé Điện Biên\"",
					"    // \"e5609d21-65c7-47ce-a8e9-bb8177cac744\"/\"Quang Minh Corp\"",
					"",
					"    pm.environment.set(\"SER-email\", \"quangminh@gmail.com\")",
					"    pm.environment.set(\"C-page\", 1)",
					"    pm.environment.set(\"C-page_size\", 50)",
					"",
					"    pm.environment.set(\"L_sku_id_p1\", \"24c74fbe-487e-44fe-86c2-647b11df993f\"); // imei product",
					"    pm.environment.set(\"L_sku_id_p2\", \"99336b48-ed19-4ea7-b20a-0df91a0f50dd\"); // physical product",
					"    pm.environment.set(\"L_branch_id\", \"e5609d21-65c7-47ce-a8e9-bb8177cac744\"); // \"Quang Minh Corp\"",
					"    pm.environment.set(\"L_sales_rep_id\", \"6e57377b-3fc2-4648-b1a6-8e0f608278de\"); // ",
					"    pm.environment.set(\"L_return_fixed_fee\", 25000);",
					"    pm.environment.set(\"L_return_percentage_fee\", 10);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	]
}